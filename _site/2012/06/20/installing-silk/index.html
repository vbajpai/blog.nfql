
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
   <meta http-equiv="content-type" content="text/html; charset=utf-8" />
   <title>Installing SiLK</title>
   <meta name="author" content="Vaibhav Bajpai" />
   <link href="http://feeds.feedburner.com/feedname" rel="alternate" title="your title" type="application/atom+xml" />

   <!-- syntax highlighting CSS -->
   <link rel="stylesheet" href="/assets/themes/tom/css/syntax.css" type="text/css" />

   <!-- Homepage CSS -->
   <link rel="stylesheet" href="/assets/themes/tom/css/screen.css" type="text/css" media="screen, projection" />

   <!-- Typekit -->
   <script type="text/javascript" src="http://use.typekit.com/jpd0pfm.js"></script>
   <script type="text/javascript">try{Typekit.load();}catch(e){}</script>
</head>
<body>

  <div class="site">
    <div class="title">
      <a href="/">NFQL</a>
    </div>

    
<div id="post">
  <h1>Installing SiLK</h1>
  <p class="meta">
    20 June 2012 
    
  </p>
  <p><a href='http://tools.netsa.cert.org/silk/'>SiLK &#8594;</a></p>

<blockquote>
<p>SiLK is a suite of network traffic collection and analysis tools developed and maintained by the CERT Network Situational Awareness Team (CERT NetSA) at Carnegie Mellon University to facilitate security analysis of large networks. The SiLK tool suite supports the efficient collection, storage, and analysis of network flow data, enabling network security analysts to rapidly query large historical traffic data sets.</p>
</blockquote>

<p>Since SiLK is the only tool that comes even remotely closer to the functionality offered by the NFQL, we used it as a reference to compare the performance of the execution engine.</p>

<h2 id='download_and_install_silk'>Download and Install SiLK</h2>
<hr />
<p>Download <a href='http://tools.netsa.cert.org/silk/'>SiLK &#8594;</a></p>

<pre><code>&gt;&gt; wget http://tools.netsa.cert.org/releases/silk-2.4.7.tar.gz
&gt;&gt; sha1sum silk-2.4.7.tar.gz | grep 2ff0cd1d00de70f667728830aa3e920292e99aec</code></pre>

<p>Install SiLK</p>

<pre><code>&gt;&gt; ./configure
&gt;&gt; make
&gt;&gt; sudo make install
&gt;&gt; sudo ldconfig</code></pre>

<p>.</p>

<h2 id='silk_analysis_tools'>SiLK Analysis Tools:</h2>
<hr />
<p>Absolute Filtering <code>(dst port 80 or (src port 80 and dst port 25))</code></p>

<pre><code>&gt;&gt; rwfilter --dport=80 --pass=out1.rwf.gz in.rwf.gz
&gt;&gt; rwfilter --sport=80 --dport=25 --pass=out2.rwf.gz in.rwf.gz</code></pre>

<p>Concatenating Flow Records</p>

<pre><code>&gt;&gt; rwcat --output=out.rwf.gz out1.rwf.gz out2.rwf.gz
&gt;&gt; rwcat out1.rwf.gz out2.rwf.gz &gt;&gt; out.rwf.gz
&gt;&gt; rwappend [--create] out.rwf.gz out1.rwf.gz out2.rwf.gz</code></pre>

<p>Reading Flow Records</p>

<pre><code>&gt;&gt; rwcut out.rwf.gz</code></pre>

<p>Generating Statistical Summary</p>

<pre><code>&gt;&gt; rwstats --overall-stats out.rwf.gz</code></pre>

<p>Creating Time Series (10 minute interval)</p>

<pre><code>&gt;&gt; rwcount --bin-size=600 out.rwf.gz</code></pre>

<p>Sorting Flow Records (on <code>srcIP</code>)</p>

<pre><code>&gt;&gt; rwsort --fields=1 --output=out-sort.rwf.gz out.rwf.gz</code></pre>

<p>Grouping Flow Records and Setting Thresholds</p>

<pre><code>&gt;&gt; rwuniq --field=1 out.raw --bytes --packets=1000 --flows=200
&gt;&gt; rwgroup --id-field=1,2,3,4 \
   --delta-field=9 --delta-value=3600 in.rwf.gz &gt; out.rwf.gz</code></pre>

<p>Remove Duplicate Flow Records</p>

<pre><code>&gt;&gt; rwdedupe --stime-delta=100 out1.rwf.gz out2.rwf.gz &gt; out.rwf.gz</code></pre>

<p>Splitting Flow Records</p>

<pre><code>&gt;&gt; rwsplit out.rwf.gz --basename=splits --flow-limit=1000</code></pre>

<p>Show SiLK File Characteristics</p>

<pre><code>&gt;&gt; rwfileinfo out.rwf.gz</code></pre>

<p>Merging Flow Records</p>

<pre><code>srcIP = dstIP
dstIP = srcIP
srcPort = dstPort
dstPort = srcPort

&gt;&gt; rwmatch --relate=1,2 --relate=2,1 --relate=3,4 --relate=4,3 \ 
   query.rwf.gz response.rwf.gz stdout</code></pre>

<p>.</p>

<h2 id='generate_silk_flow_records'>Generate SiLK Flow Records:</h2>
<hr />
<p>Generate Flow Records from Text Files</p>

<pre><code>&gt;&gt; rwtuc --fields=1-9 out.txt &gt; out.rwf.gz</code></pre>

<p>Generate Flow Record for each Dumped Packet from <code>tcpdump</code></p>

<pre><code>&gt;&gt; rwptoflow out.pcap &gt; out.rwf.gz</code></pre>
</div>

<div id="related">
  <h2>Related Posts</h2>
  <ul class="posts">
    
      <li><span>28 Jun 2012</span> &raquo; <a href="/2012/06/28/python-scripts-to-automate-benchmarking">Python Scripts to Automate Benchmarking</a></li>
    
      <li><span>25 Jun 2012</span> &raquo; <a href="/2012/06/25/sample-silk-query">Sample SiLK Query</a></li>
    
      <li><span>23 Jun 2012</span> &raquo; <a href="/2012/06/23/flow-tools-to-silk">flow tools to SiLK</a></li>
    
  </ul>
</div>




    <div class="footer">
      <div class="contact">
        <p>
          Vaibhav Bajpai<br />
          <a href='mailto:contact@vaibhavbajpai.com'>contact@vaibhavbajpai.com</a>
        </p>
      </div>
      <div class="contact">
        <p>
          <a href="http://github.com/vbajpai/">github.com/vbajpai</a><br />
          <a href="http://facebook.com/vaibhavbajpai/">facebook.com/vaibhavbajpai</a><br />
        </p>
      </div>
      <div class="rss">
        <a href="http://feeds.feedburner.com/feedname">
          <img src="/assets/themes/tom/images/rss.png" alt="Subscribe to RSS Feed" />
        </a>
      </div>
    </div>
  </div>
  <a href="http://github.com/vbajpai"><img style="position: absolute; top: 0; right: 0; border: 0;" src="http://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png" alt="Fork me on GitHub" /></a>

  
</body>
</html>

