
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
   <meta http-equiv="content-type" content="text/html; charset=utf-8" />
   <title>New Grouper Features</title>
   <meta name="author" content="Vaibhav Bajpai" />
   <link href="http://feeds.feedburner.com/feedname" rel="alternate" title="your title" type="application/atom+xml" />

   <!-- syntax highlighting CSS -->
   <link rel="stylesheet" href="/assets/themes/tom/css/syntax.css" type="text/css" />

   <!-- Homepage CSS -->
   <link rel="stylesheet" href="/assets/themes/tom/css/screen.css" type="text/css" media="screen, projection" />

   <!-- Typekit -->
   <script type="text/javascript" src="http://use.typekit.com/jpd0pfm.js"></script>
   <script type="text/javascript">try{Typekit.load();}catch(e){}</script>
</head>
<body>

  <div class="site">
    <div class="title">
      <a href="/">NFQL</a>
    </div>

    
<div id="post">
  <h1>New Grouper Features</h1>
  <p class="meta">
    12 March 2012 
    
  </p>
  <ul>
<li>
<p>Pretty printing group aggregations as new flow record representatives. For example:</p>

<pre><code>grouper g_www_res {
   module g1 {
      srcip = srcip
      dstip = dstip
   }
   aggregate srcip, dstip, sum(bytes) as bytes, bitOR(tcp_flags) as flags, 
}</code></pre>

<p>will form groups with same <code>srcIP</code> and <code>dstIP</code> and display as:</p>

<pre><code>No. of Groups: 32 (Aggregations)

...	   SrcIPaddress    ...	  	DstIPaddress      OR(Fl)    Sum(Octets)

...	   4.23.48.126     ...  	192.168.0.135     3         81034
...	   8.12.214.126    ...  	192.168.0.135     2         5065
...	   80.157.170.88   ...  	192.168.0.135     6         18025</code></pre>

<p>The idea is to return aggregates, common fields and sets of uncommon fields.<br />The feature to return set of uncommon fields still needs to be implemented.</p>
</li>

<li>
<p>There can be a situtation as in the example above, where the query designer might incorrectly ask for aggregation on a field already specified in a grouper module. Of course, the aggregation does not make any sense, since the grouped record will always have the same value for that field. The engine is now smart to realize it and ignores such aggregations as above.</p>
</li>

<li>
<p>Records are clubbed together into one group if no group modules are defined</p>

<pre><code>grouper g_www_res {
   module g1 {}
   aggregate sum(bytes) as bytes
}</code></pre>

<p>Previously such a query would form groups for each individual filtered record. That was less useful since then one could not just perform meaningful aggregates (as above). Now, when the group modules are empty, all the filtered records are clubbed into one group to allow such aggregations.</p>

<pre><code>No. of Groups: 1 (Aggregations)

...    Sum(Octets)
...    2356654</code></pre>
</li>
</ul>
</div>

<div id="related">
  <h2>Related Posts</h2>
  <ul class="posts">
    
      <li><span>24 Apr 2012</span> &raquo; <a href="/2012/04/24/flexible-stages">Flexible Stages</a></li>
    
      <li><span>22 Apr 2012</span> &raquo; <a href="/2012/04/22/graceful-exits-on-failure">Graceful Exits on Failure</a></li>
    
      <li><span>20 Apr 2012</span> &raquo; <a href="/2012/04/20/reading-multiple-traces-from-stdin">Reading Multiple Traces from stdin</a></li>
    
  </ul>
</div>




    <div class="footer">
      <div class="contact">
        <p>
          Vaibhav Bajpai<br />
          <a href='mailto:contact@vaibhavbajpai.com'>contact@vaibhavbajpai.com</a>
        </p>
      </div>
      <div class="contact">
        <p>
          <a href="http://github.com/vbajpai/">github.com/vbajpai</a><br />
          <a href="http://facebook.com/vaibhavbajpai/">facebook.com/vaibhavbajpai</a><br />
        </p>
      </div>
      <div class="rss">
        <a href="http://feeds.feedburner.com/feedname">
          <img src="/assets/themes/tom/images/rss.png" alt="Subscribe to RSS Feed" />
        </a>
      </div>
    </div>
  </div>
  <a href="http://github.com/vbajpai"><img style="position: absolute; top: 0; right: 0; border: 0;" src="http://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png" alt="Fork me on GitHub" /></a>

  
</body>
</html>

